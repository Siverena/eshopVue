(()=>{var t={170:()=>{new Vue({el:"#app",data:{userSearch:"",showCart:!1,cartUrl:"/cartData",catalogUrl:"/catalogData",products:[],cartItems:[],filtered:[],imgCatalog:"https://via.placeholder.com/200x150",imgCart:"https://via.placeholder.com/100x70",networkError:!1},methods:{makePOSTRequest(t,e={}){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).catch((t=>{this.networkError=!0}))},makeGETRequest(t){return fetch(t).then((t=>t.json())).catch((e=>{t==this.catalogUrl&&(this.networkError=!0)}))},makeDeleteRequest(t,e={}){return fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).catch((t=>{this.networkError=!0}))},addItem(t){this.makePOSTRequest("/addToCart",t).then((t=>{0===t.result&&alert("Error"),this.cartItems=[...t.list]}))},deleteItem(t){this.makeDeleteRequest("/deleteItem",t).then((t=>{0===t.result&&alert("Error"),this.cartItems=[...t.list]}))},filter(t){let e=new RegExp(t,"i");this.filtered=this.products.filter((t=>e.test(t.product_name)))},fillCartList(){this.makeGETRequest(`${this.catalogUrl}`).then((t=>{for(let e of t)this.products.push(e),this.filtered.push(e)})).catch((t=>{}))}},mounted(){this.fillCartList(),this.makeGETRequest(`${this.cartUrl}`).then((t=>{for(let e of t)this.cartItems.push(e)})).catch((t=>{console.log(t)}))}})},359:()=>{Vue.component("cart-list",{props:["products"],template:'\n    <div class="cart-block "   > \n    <p v-if="!products.length">Корзина пуста</p>\n   \n        <cart-item v-for="product of products" \n        :item="product" \n        :key="product.id_product"\n        ></cart-item>\n\n     </div> \n    ',mounted(){}}),Vue.component("cart-item",{props:["item"],template:'\n    <div class="cart-item" :key="item.id_product">\n        <div class="product-bio">\n            <div class="product-bio__img-wrap">\n                <img :src="item.img" alt="Some image">\n            </div>\n            <div class="product-desc">\n                <p class="product-title">{{item.product_name}}</p>\n                <p class="product-quantity">Количество: {{item.quantity}}</p>\n                <p class="product-single-price">$ {{item.price}} each</p>\n            </div>\n        </div>\n        <div class="right-block">\n            <p class="product-price">{{item.quantity*item.price}}</p>\n            <button class="del-btn" @click="$parent.$emit(\'delete-item\',item)">&times;</button>\n        </div>\n    </div>\n    ',mounted(){}})},166:()=>{Vue.component("error-msg",{props:["netErr"],template:'\n        <p v-if="netErr">Network Error Товары не получены</p>\n    ',mounted(){}})},866:()=>{Vue.component("goods-list",{props:["products","netErr"],template:'\n     <div class="products">\n     <error-msg :net-err = "netErr"></error-msg>\n        <goods-item v-if = "products.length" v-for="product of products" \n        :product="product" \n        :key="product.id_product"\n        ></goods-item>\n     </div> \n    ',mounted(){}}),Vue.component("goods-item",{props:["product"],template:'\n        <div class="product-item">\n        <div class="product-item__img-wrap">\n            <img :src="product.img"alt="Some img" class="product-img">\n            </div>\n            <div class="desc">\n                <h3>{{product.product_name}}</h3>\n                <p>{{product.price}} $</p>\n                <button class="buy-btn" @click="$parent.$emit(\'add-item\',product)">Купить</button>\n            </div>\n        </div>\n    ',mounted(){console.log(this.product),console.log(this.product.img)}})},647:()=>{Vue.component("search-form",{data:()=>({userSearch:""}),template:'\n    <form action="#" class="search-form" @submit.prevent="$parent.filter(userSearch)">\n        <input type="text" class="search-field" v-model="userSearch" >\n        <button class="btn-search" type="submit">\n            <i class="fas fa-search"></i>\n        </button>\n    </form>\n    ',mounted(){}})}},e={};function r(o){var s=e[o];if(void 0!==s)return s.exports;var n=e[o]={exports:{}};return t[o](n,n.exports,r),n.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";r(359),r(166),r(866),r(647),r(170)})()})();